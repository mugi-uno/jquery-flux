(function(t,r){if(!t){console.warn("jquery-flux required jQuery and lodash.");return}t.fn.flux=function(t){this.dispatcher=t;this.store=this.dispatcher(null,{});var i=this;this.off(":flux-update").on(":flux-update",function(t,e){var s=i.store;i.store=i.dispatcher(s,e);if(!r.isEqual(s,i.store)){i.forceUpdate(s)}});var e=this.attr("data-flux-initial-state");if(e){i.dispatch(function(){return{type:"@@INITIALIZE",store:JSON.parse(e||"{}")}})}return this};t.fn.forceUpdate=function(t){var r=t||this.store;this.trigger(":publish",[r,this.store]);return this};t.fn.dispatch=function(t){this.trigger(":flux-update",[t(this.store)]);return this}})(jQuery,_);